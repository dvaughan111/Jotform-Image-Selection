<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Personality Quiz - Fixed Resizing</title>
    <link href="https://fonts.googleapis.com/css2?family=Futura:wght@400;700&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@300;400;600&display=swap" rel="stylesheet">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Montserrat', sans-serif;
            background: linear-gradient(135deg, #8f118d 0%, #41afba 100%);
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            padding: 20px;
            color: #333;
            overflow: visible;
        }

        .container {
            width: 100%;
            max-width: 800px;
            background: white;
            border-radius: 15px;
            overflow: hidden;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
            transition: height 0.5s ease;
        }

        .widget-container {
            background: transparent;
            padding: 20px 0;
            transition: min-height 0.5s ease;
        }

        .image-row {
            display: flex;
            justify-content: center;
            align-items: center;
            margin-bottom: 35px;
            width: 100%;
        }

        .image-option {
            width: 300px;
            height: 300px;
            border-radius: 15px;
            overflow: hidden;
            cursor: pointer;
            transition: all 0.3s ease;
            position: relative;
            border: 4px solid transparent;
            flex-shrink: 0;
            background: transparent;
        }

        .image-option:hover {
            transform: translateY(-5px);
            border-color: #8f118d;
            box-shadow: 0 10px 20px rgba(0, 0, 0, 0.2);
        }

        .image-option.selected {
            transform: scale(1.03);
            border: 20px solid #41afba !important;
            box-shadow: 0 0 20px rgba(65, 175, 186, 0.5);
        }

        .image-option img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            display: block;
            background: transparent;
        }

        .or-separator {
            font-family: 'Futura', 'Montserrat', sans-serif;
            font-weight: bold;
            font-size: 18pt;
            color: #333;
            margin: 0 30px;
            padding: 0 10px;
            flex-shrink: 0;
        }

        .next-button {
            font-family: 'Futura', 'Montserrat', sans-serif;
            font-weight: 700;
            font-size: 20px;
            color: #ffffff;
            background: #8f118d;
            border: 3px solid #8f118d;
            border-radius: 30px;
            padding: 15px 40px;
            cursor: pointer;
            transition: all 0.3s ease;
            text-transform: uppercase;
            letter-spacing: 1px;
            margin: 30px auto;
            display: block;
        }

        .next-button:hover {
            transform: translateY(-3px);
            background: #6d0c6b;
            border-color: #6d0c6b;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
        }

        .next-button:disabled {
            opacity: 0.5;
            cursor: not-allowed;
            transform: none;
        }

        .quiz-page {
            /* Handled by JS */
        }
        
        .result-page {
            display: none;
            text-align: center;
            width: 100%;
            padding: 20px;
        }

        .result-container {
            text-align: center;
            padding: 40px;
            background: rgba(255, 255, 255, 0.95);
            border-radius: 15px;
            width: 100%;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            margin: 0 auto;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
            border: 1px solid #eee;
        }

        .personality-type {
            font-family: 'Futura', sans-serif;
            font-weight: 700;
            font-size: 42px;
            color: #8f118d;
            margin: 25px 0;
            text-align: center;
            line-height: 1.2;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .personality-description {
            color: #333;
            font-family: 'Montserrat', sans-serif;
            font-size: 20px;
            line-height: 1.6;
            max-width: 600px;
            margin: 0 0 30px;
            text-align: center;
            font-weight: 400;
        }

        .reset-button {
            font-family: 'Futura', 'Montserrat', sans-serif;
            font-weight: 700;
            font-size: 16px;
            color: #ffffff;
            background: #41afba;
            border: 3px solid #41afba;
            border-radius: 30px;
            padding: 12px 30px;
            cursor: pointer;
            transition: all 0.3s ease;
            text-transform: uppercase;
            letter-spacing: 1px;
            margin-top: 20px;
        }

        .reset-button:hover {
            transform: translateY(-3px);
            background: #32949e;
            border-color: #32949e;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
        }

        @media (max-width: 850px) {
            .image-option {
                width: 270px;
                height: 270px;
            }

            .image-option.selected {
                border: 20px solid #41afba !important;
            }
            
            .or-separator {
                margin: 0 25px;
            }
            
            .personality-type {
                font-size: 36px;
            }
            
            .personality-description {
                font-size: 18px;
            }
        }

        @media (max-width: 768px) {
            .image-row {
                flex-direction: column;
            }

            .or-separator {
                margin: 15px 0;
            }

            .image-option {
                width: 250px;
                height: 250px;
            }

            .image-option.selected {
                border: 20px solid #41afba !important;
            }
            
            .personality-type {
                font-size: 30px;
            }
            
            .personality-description {
                font-size: 16px;
            }
            
            .result-container {
                padding: 30px 20px;
            }
        }
    </style>
</head>
<body>
    <div class="container" id="mainContainer">
        <div class="quiz-page" id="quizPage">
            <div class="widget-container" id="widget"></div>
            <button class="next-button" id="nextButton" disabled>What's my vibe?</button>
        </div>

        <div class="result-page" id="resultPage">
            <div class="result-container" id="resultContainer"></div>
            <button class="reset-button" id="resetButton">Take Again</button>
        </div>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            const widgetContainer = document.getElementById('widget');
            const resultContainer = document.getElementById('resultContainer');
            const quizPage = document.getElementById('quizPage');
            const resultPage = document.getElementById('resultPage');
            const nextButton = document.getElementById('nextButton');
            const resetButton = document.getElementById('resetButton');
            const mainContainer = document.getElementById('mainContainer');
            
            // Set initial height
            mainContainer.style.height = '3400px';
            widgetContainer.style.minHeight = '3400px';

            // Using your original image URL
            const baseImageUrl = 'https://dvaughan111.github.io/Jotform-Image-Selection/images/';

            // Function to resize the container
            function resizeContainer(height) {
                mainContainer.style.height = height + 'px';
                widgetContainer.style.minHeight = height + 'px';
                
                // Also notify parent if in iframe
                if (window.parent !== window) {
                    window.parent.postMessage({
                        type: 'resize-iframe',
                        height: height
                    }, '*');
                }
            }

            // Create image selection pairs (10 pairs for 20 images)
            for (let i = 0; i < 10; i++) {
                const row = document.createElement('div');
                row.className = 'image-row';

                const image1Number = (i * 2) + 1;
                const image2Number = (i * 2) + 2;

                const image1 = document.createElement('div');
                image1.className = 'image-option';
                image1.dataset.choice = `option${image1Number}`;
                image1.dataset.value = image1Number;
                image1.innerHTML = `<img src="${baseImageUrl}${image1Number}.png" alt="Option ${image1Number}">`;

                const orSeparator = document.createElement('div');
                orSeparator.className = 'or-separator';
                orSeparator.textContent = 'OR';

                const image2 = document.createElement('div');
                image2.className = 'image-option';
                image2.dataset.choice = `option${image2Number}`;
                image2.dataset.value = image2Number;
                image2.innerHTML = `<img src="${baseImageUrl}${image2Number}.png" alt="Option ${image2Number}">`;

                image1.addEventListener('click', function() {
                    selectOption(this, image2);
                    checkAllSelected();
                });

                image2.addEventListener('click', function() {
                    selectOption(this, image1);
                    checkAllSelected();
                });

                row.appendChild(image1);
                row.appendChild(orSeparator);
                row.appendChild(image2);

                widgetContainer.appendChild(row);
            }

            function selectOption(selectedElement, otherElement) {
                selectedElement.classList.add('selected');
                otherElement.classList.remove('selected');
            }

            function checkAllSelected() {
                const selectedOptions = document.querySelectorAll('.image-option.selected');
                nextButton.disabled = selectedOptions.length !== 10;
            }

            nextButton.addEventListener('click', function() {
                const selectedOptions = document.querySelectorAll('.image-option.selected');
                
                if (selectedOptions.length === 10) {
                    const selectedValues = Array.from(selectedOptions).map(option =>
                        parseInt(option.dataset.value));

                    const personality = analyzeSelections(selectedValues);

                    resultContainer.innerHTML = `
                        <h2 class="personality-type">${personality.type}</h2>
                        <p class="personality-description">${personality.description}</p>
                    `;
                    
                    quizPage.style.display = 'none';
                    resultPage.style.display = 'block';

                    // Resize the container to 800px
                    resizeContainer(800);
                    
                    window.scrollTo({ top: 0, behavior: 'smooth' });
                }
            });

            resetButton.addEventListener('click', function() {
                // Reset all selections
                const selectedOptions = document.querySelectorAll('.image-option.selected');
                selectedOptions.forEach(option => {
                    option.classList.remove('selected');
                });
                
                // Reset button state
                nextButton.disabled = true;
                
                // Show quiz, hide results
                quizPage.style.display = 'block';
                resultPage.style.display = 'none';
                
                // Resize back to original height
                resizeContainer(3400);
                
                window.scrollTo({ top: 0, behavior: 'smooth' });
            });

            function analyzeSelections(selectedValues) {
                let homebodyScore = 0;
                let adventurousScore = 0;
                let sophisticatedScore = 0;
                let casualScore = 0;
                let rulebreakerScore = 0;
                let independentScore = 0;
                let rebelliousScore = 0;
                let financialScore = 0;

                selectedValues.forEach(value => {
                    if ([1, 4, 7, 15].includes(value)) homebodyScore++;
                    if ([3, 5, 16].includes(value)) adventurousScore++;
                    if ([6, 11].includes(value)) sophisticatedScore++;
                    if ([2, 8, 10, 12, 13, 14].includes(value)) casualScore++;
                    if ([3, 5, 9, 16].includes(value)) rulebreakerScore++;
                    if ([1, 8, 13, 15].includes(value)) independentScore++;
                    if ([17].includes(value)) rebelliousScore++;
                    if ([19].includes(value)) financialScore++;
                    if ([20].includes(value)) financialScore--;
                });

                let personalityType, description;
                if (rebelliousScore >= 1) {
                    personalityType = "THE REBEL";
                    description = "You challenge conventions and aren't afraid to go against the grain. You question authority and traditional norms, preferring to carve your own path. Your rebellious spirit makes you a natural innovator who isn't afraid to break rules when they don't make sense.";
                } else if (rulebreakerScore >= 3) {
                    personalityType = "THE RULE BREAKER";
                    description = "You march to the beat of your own drum and aren't afraid to challenge conventions. You see rules as suggestions rather than commandments and often find creative ways around obstacles. Your independent thinking and willingness to question authority make you a natural innovator and change-maker.";
                } else if (independentScore >= 3) {
                    personalityType = "THE INDEPENDENT SPIRIT";
                    description = "You value your autonomy above all else and thrive when following your own path. You're self-reliant, capable, and comfortable in your own company. While you can work well with others, you never lose sight of your own goals and values. Your self-sufficiency is both admirable and inspiring to those around you.";
                } else if (adventurousScore >= 3) {
                    personalityType = "THE THRILL SEEKER";
                    description = "You're drawn to excitement and new experiences! Whether it's outdoor adventures, spontaneous travel, or trying something completely different, you thrive on variety and stimulation. You're not afraid to step outside your comfort zone and often inspire others to be more adventurous too.";
                } else if (sophisticatedScore >= 2) {
                    personalityType = "THE REFINED ENTHUSIAST";
                    description = "You have a taste for the finer things in life and appreciate quality over quantity. You enjoy cultural experiences, elegant settings, and meaningful conversations. You know how to balance sophistication with fun, and you bring a touch of class to everything you do.";
                } else if (homebodyScore >= 4) {
                    personalityType = "THE COMFORT CONNOISSEUR";
                    description = "You find joy in life's simple pleasures and value comfort and coziness above all else. You prefer intimate gatherings over big crowds and know that the best moments often happen in familiar, comfortable spaces. You're the friend everyone turns to for a relaxing, stress-free good time.";
                } else {
                    personalityType = "THE BALANCED EXPLORER";
                    description = "You're wonderfully adaptable and open to different experiences. You can appreciate both quiet nights in and exciting adventures out. You're social yet introspective, practical yet fun-loving. Your friends love that they can count on you for any kind of activity - you truly go with the flow!";
                }

                return {
                    type: personalityType,
                    description: description
                };
            }
        });
    </script>
</body>
</html>
